import js.html.FileReader;
import js.html.FormData;
import js.html.XMLHttpRequest;
import js.html.XHRType;
import js.html.Blob;
import js.html.File;
import js.html.FileList;
import js.html.ArrayBuffer;
import js.html.ArrayBufferView;
import js.html.ArrayLike;
import js.html.Function;
import js.html.TextDecoder;
import js.html.Uint8Array;
import js.html.Float32Array;
import js.html.Uint16Array;
import js.html.Blob;
import js.html.Image;
import js.html.Canvas;
import js.html.CanvasRenderingContext2D;
import js.html.ImageData;
import js.html.HTMLImageElement;
import js.html.HTMLCanvasElement;
import js.html.HTMLDivElement;
import js.html.HTMLScriptElement;
import haxe.Timer;
import haxe.ds.StringMap;
import haxe.io.Bytes;
import haxe.io.BytesInput;
import haxe.io.BytesOutput;
import haxe.io.Input;
import haxe.io.Output;
import haxe.math.Math;
import haxe.math.FloatPosInf;
import haxe.math.FloatNegInf;
import haxe.math.NaN;
import haxe.macro.Compiler;
import haxe.macro.Context;
import haxe.macro.Expr;
import haxe.macro.Macro;
import haxe.macro.Type;
import haxe.macro.Field;
import haxe.macro.ExprDef;
import haxe.macro.Binop;
import haxe.macro.Unop;
import haxe.macro.Block;
import haxe.macro.Call;
import haxe.macro.ClassField;
import haxe.macro.Ident;
import haxe.macro.TType;
import haxe.macro.TField;
import haxe.macro.TFun;
import haxe.macro.TAnon;
import haxe.macro.TVar;
import haxe.macro.TIdent;
import haxe.macro.TEnum;
import haxe.macro.TDynamic;
import haxe.macro.TInst;
import haxe.macro.TArray;
import haxe.macro.TExpr;
import haxe.macro.TLocal;
import haxe.macro.TFunction;
import haxe.macro.TAbstract;
import haxe.macro.TClass;
import haxe.macro.TEnumField;
import haxe.macro.TConst;
import haxe.macro.TMacro;
import haxe.macro.TObject;
import haxe.macro.TFieldAccess;
import haxe.macro.TSuper;
import haxe.macro.TNew;
import haxe.macro.TCall;
import haxe.macro.TTry;
import haxe.macro.TUnop;
import haxe.macro.TBinop;
import haxe.macro.TVarDecl;
import haxe.macro.TArrayAccess;
import haxe.macro.TGlobal;
import haxe.macro.TType;
import haxe.macro.TThis;
import haxe.macro.TClosure;
import haxe.macro.TParent;
import haxe.macro.TPackage;
import haxe.macro.TLambda;
import haxe.macro.TList;
import haxe.macro.TMethod;
import haxe.macro.TTypeParam;
import haxe.macro.TAnonymous;
import haxe.macro.TWhile;
import haxe.macro.TDo;
import haxe.macro.TFor;
import haxe.macro.TIf;
import haxe.macro.TThrow;
import haxe.macro.TBreak;
import haxe.macro.TContinue;
import haxe.macro.TFunctionType;
import haxe.macro.TMacroType;
import haxe.macro.TAbstractType;
import haxe.macro.TPath;
import haxe.macro.TModule;
import haxe.macro.TMacroFunction;
import haxe.macro.TVarType;
import haxe.macro.TTypeParamType;
import haxe.macro.TDynamicType;
import haxe.macro.TUnknown;
import haxe.macro.TDisplay;
import haxe.macro.TEnumParameter;
import haxe.macro.TEnumParameters;
import haxe.macro.TClassParameter;
import haxe.macro.TClassParameters;
import haxe.macro.TNull;
import haxe.macro.TSwitch;
import haxe.macro.TMatch;
import haxe.macro.TCatch;
import haxe.macro.TMeta;
import haxe.macro.TParameters;
import haxe.macro.TWith;
import haxe.macro.TTypeExpr;
import haxe.macro.TMacroExpr;
import haxe.macro.TObjectDecl;
import haxe.macro.TObjectField;
import haxe.macro.TExprDef;
import haxe.macro.TFunctionDecl;
import haxe.macro.TClassDecl;
import haxe.macro.TInterfaceDecl;
import haxe.macro.TAbstractDecl;
import haxe.macro.TEnumDecl;
import haxe.macro.TTypeDecl;
import haxe.macro.TMacroDecl;
import haxe.macro.TImport;
import haxe.macro.TUsing;
import haxe.macro.TDecl;
import haxe.macro.TEnumFieldDecl;
import haxe.macro.TClassFieldDecl;
import haxe.macro.TFunctionParam;
import haxe.macro.TMacroBody;
import haxe.macro.TMacroCall;
import haxe.macro.TExprWith;
import haxe.macro.TExprDef;
import haxe.macro.TExprCall;
import haxe.macro.TExprNew;
import haxe.macro.TExprFunction;
import haxe.macro.TExprArray;
import haxe.macro.TExprCast;
import haxe.macro.TExprUnop;
import haxe.macro.TExprBinop;
import haxe.macro.TExprField;
import haxe.macro.TExprParent;
import haxe.macro.TExprObject;
import haxe.macro.TExprMap;
import haxe.macro.TExprBlock;
import haxe.macro.TExprSwitch;
import haxe.macro.TExprTry;
import haxe.macro.TExprWhile;
import haxe.macro.TExprDo;
import haxe.macro.TExprFor;
import haxe.macro.TExprIf;
import haxe.macro.TExprMatch;
import haxe.macro.TExprThrow;
import haxe.macro.TExprBreak;
import haxe.macro.TExprContinue;
import haxe.macro.TExprReturn;
import haxe.macro.TExprMeta;
import haxe.macro.TExprInline;
import haxe.macro.TExprMacro;
import haxe.macro.TExprConst;
import haxe.macro.TExprIdent;
import haxe.macro.TExprThis;
import haxe.macro.TExprSuper;
import haxe.macro.TExprArrayAccess;
import haxe.macro.TExprType;
import haxe.macro.TExprUnknown;
import haxe.macro.TExprDisplay;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayKind;
import haxe.macro.TExprDisplayModule;
import haxe.macro.TExprDisplayField;
import haxe.macro.TExprDisplayDefine;
import haxe.macro.TExprDisplayFunction;
import haxe.macro.TExprDisplayClass;
import haxe.macro.TExprDisplayCall;
import haxe.macro.TExprDisplayCompose;
import haxe.macro.TExprDisplayExtension;
import haxe.macro.TExprDisplayBounds;
import haxe.macro.TExprDisplayArrow;
import haxe.macro.TExprDisplayTag;
import haxe.macro.TExprDisplayEnum;
import haxe.macro.TExprDisplayConstr;
import haxe.macro.TExprDisplayDynamic;
import haxe.macro.TExprDisplayInst;
import haxe.macro.TExprDisplayError;
import haxe.macro.TExprDisplayArray;
import haxe.macro.TExprDisplayObject;
import haxe.macro.TExprDisplayTuple;
import haxe.macro.TExprDisplayList;
import haxe.macro.TExprDisplayParent;
import haxe.macro.TExprDisplayExpr;
import haxe.macro.TExprDisplayLambda;
import haxe.macro.TExprDisplayAnon;
import haxe.macro.TExprDisplayType;
import haxe.macro.TExprDisplayMacro;
import haxe.macro.TExprDisplayPath;
import haxe.macro.TExprDisplayAccess;
import haxe.macro.TExprDisplayDeclType;
import haxe.macro.TExprDisplayDeclFunction;
import haxe.macro.TExprDisplayDeclVar;
import haxe.macro.TExprDisplayDeclModule;
import haxe.macro.TExprDisplayDeclClass;
import haxe.macro.TExprDisplayDeclEnum;
import haxe.macro.TExprDisplayDeclTypedef;
import haxe.macro.TExprDisplayDeclAbstract;
import haxe.macro.TExprDisplayDeclMacro;
import haxe.macro.TExprDisplayDeclEnumValue;
import haxe.macro.TExprDisplayDeclField;
import haxe.macro.TExprDisplayDeclMethod;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDeclModuleType;
import haxe.macro.TExprDisplayDeclFunctionType;
import haxe.macro.TExprDisplayDeclVarType;
import haxe.macro.TExprDisplayDeclTypeType;
import haxe.macro.TExprDisplayDeclMacroType;
import haxe.macro.TExprDisplayDeclAbstractType;
import haxe.macro.TExprDisplayDeclExtension;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;
import haxe.macro.TExprDisplayDecl;

// Import necessary Three.js classes
import three.core.BufferGeometry;
import three.core.Object3D;
import three.core.BufferAttribute;
import three.core.InterleavedBufferAttribute;
import three.core.InterleavedBuffer;
import three.core.InstancedBufferAttribute;
import three.core.InstancedInterleavedBuffer;
import three.core.Raycaster;
import three.core.Layers;
import three.core.EventDispatcher;
import three.core.Clock;
import three.core.Sphere;
import three.core.Frustum;
import three.core.Sphere;
import three.core.Ray;
import three.core.Plane;
import three.core.Math;
import three.core.Box3;
import three.core.Box2;
import three.core.Vector2;
import three.core.Vector3;
import three.core.Vector4;
import three.core.Euler;
import three.core.Quaternion;
import three.core.Matrix3;
import three.core.Matrix4;
import three.core.Spherical;
import three.core.Cylindrical;
import three.core.Color;
import three.core.SRGBColorSpace;
import three.core.Interpolant;
import three.core.InterpolateDiscrete;
import three.core.InterpolateLinear;
import three.core.InterpolateSmooth;
import three.core.InterpolateSpline;
import three.core.Triangle;
import three.core.PropertyBinding;
import three.core.PropertyBinding;
import three.core.InstancedBufferGeometry;
import three.core.InstancedMesh;
import three.core.LOD;
import three.core.Raycaster;
import three.core.Layers;
import three.core.EventDispatcher;
import three.core.Clock;
import three.core.Object3D;
import three.core.InstancedMesh;
import three.core.LOD;
import three.core.Skeleton;
import three.core.AnimationClip;
import three.core.KeyframeTrack;
import three.core.AnimationObjectGroup;
import three.core.AnimationMixer;
import three.core.AnimationAction;
import three.animations.KeyframeTrack;
import three.animations.PropertyMixer;
import three.animations.PropertyBinding;
import three.animations.KeyframeTrack;
import three.animations.PropertyMixer;
import three.animations.PropertyBinding;
import three.objects.Line;
import three.objects.LineSegments;
import three.objects.Points;
import three.objects.Sprite;
import three.objects.Mesh;
import three.objects.Bone;
import three.objects.Group;
import three.objects.LineLoop;
import three.objects.LinePieces;
import three.objects.Points;
import three.objects.Sprite;
import three.objects.SkinnedMesh;
import three.materials.Material;
import three.materials.MeshStandardMaterial;
import three.materials.MeshPhongMaterial;
import three.materials.MeshToonMaterial;
import three.materials.MeshNormalMaterial;
import three.materials.MeshBasicMaterial;
import three.materials.MeshLambertMaterial;
import three.materials.MeshDepthMaterial;
import three.materials.MeshDistanceMaterial;
import three.materials.MeshMatcapMaterial;
import three.materials.MeshPhysicalMaterial;
import three.materials.LineBasicMaterial;
import three.materials.LineDashedMaterial;
import three.materials.PointsMaterial;
import three.materials.SpriteMaterial;
import three.materials.ShaderMaterial;
import three.materials.RawShaderMaterial;
import three.materials.ShadowMaterial;
import three.materials.MeshStandardMaterial;

// Other necessary imports
import three.textures.Texture;
import three.textures.CanvasTexture;
import three.textures.DataTexture;
import three.textures.DepthTexture;
import three.textures.VideoTexture;
import three.textures.CubeTexture;
import three.textures.CompressedTexture;
import three.textures.DataTexture3D;
import three.textures.DataTexture2DArray;
import three.textures.TextureLoader;
import three.textures.CompressedTextureLoader;
import three.textures.CubeTextureLoader;
import three.textures.DataTextureLoader;
import three.textures.Texture;
import three.textures.CanvasTexture;
import three.textures.CompressedTexture;
import three.textures.CubeTexture;
import three.textures.DataTexture;
import three.textures.DataTexture2DArray;
import three.textures.DataTexture3D;
import three.textures.DepthTexture;
import three.textures.VideoTexture;
import three.cameras.Camera;
import three.cameras.PerspectiveCamera;
import three.cameras.OrthographicCamera;
import three.lights.Light;
import three.lights.AmbientLight;
import three.lights.DirectionalLight;
import three.lights.PointLight;
import three.lights.HemisphereLight;
import three.lights.SpotLight;
import three.lights.RectAreaLight;
import three.lights.LightShadow;
import three.lights.DirectionalLightShadow;
import three.lights.SpotLightShadow;
import three.lights.PointLightShadow;
import three.lights.RectAreaLightShadow;
import three.lights.LightProbe;
import three.scenes.Scene;
import three.scenes.Fog;
import three.scenes.FogExp2;
import three.renderers.shaders.UniformsUtils;
import three.renderers.shaders.ShaderChunk;
import three.renderers.shaders.ShaderLib;
import three.renderers.shaders.UniformsLib;
import three.renderers.RenderTarget;
import three.renderers.WebGLRenderer;
import three.renderers.WebGLRenderTarget;
import three.renderers.WebGLRenderTargetCube;
import three.renderers.WebGLMultisampleRenderTarget;
import three.renderers.WebGLCubeRenderTarget;
import three.renderers.WebGLArrayRenderTarget;
import three.renderers.WebGLDepthRenderTarget;
import three.renderers.WebGLRenderTarget;
import three.renderers.WebGLMultisampleRenderTarget;
import three.renderers.WebGLCubeRenderTarget;
import three.renderers.WebGLArrayRenderTarget;
import three.renderers.WebGLDepthRenderTarget;
import three.renderers.shaders.ShaderChunk;
import three.renderers.shaders.ShaderLib;
import three.renderers.shaders.UniformsLib;
import three.renderers.shaders.UniformsUtils;

// Utilities
const DEFAULT_TOON_TEXTURES = [
	'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=',
	// ... rest of the data
];

const NON_ALPHA_CHANNEL_FORMATS = [
	RGB_S3TC_DXT1_Format,
	RGB_PVRTC_4BPPV1_Format,
	RGB_PVRTC_2BPPV1_Format,
	RGB_ETC1_Format,
	RGB_ETC2_Format
];

// Builders. They build Three.js object from Object data parsed by MMDParser.
class MeshBuilder {
	// ... rest of the class
}

// ... rest of the classes

class MMDLoader extends Loader {
	// ... rest of the class
}

// Utilities
// ... rest of the functions

// Interpolation
class CubicBezierInterpolation extends Interpolant {
	// ... rest of the class
}

class MMDToonMaterial extends ShaderMaterial {
	// ... rest of the class
}